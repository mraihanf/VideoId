<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" th:href="@{/css/styles.css}" />
  <meta name="theme-color" content="#459d75">
  <link rel="manifest" th:href="@{/manifest.json}" />
  <link rel="shortcut icon" sizes="16x16" th:href="@{/images/BTV.ico}" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.18/dist/sweetalert2.min.css"
    integrity="sha256-7jUS+MWeqkFdmW9ozkZ7mPagz+QmMbsBlt+Q3MsE+FU=" crossorigin="anonymous">
  <!-- bootstrap -->
  <link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css}" rel="stylesheet"
    integrity="sha256-djO3wMl9GeaC/u6K+ic4Uj/LKhRUSlUFcsruzS7v5ms=" crossorigin="anonymous"
    referrerpolicy="no-referrer">
  <!-- font-awesome -->
  <link rel="stylesheet" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css}"
    integrity="sha384-iw3OoTErCYJJB9mCa8LNS2hbsQ7M3C0EpIsO/H5+EGAkPGc6rk+V8i04oW/K5xq0" crossorigin="anonymous">
  <!-- dataTable -->
  <link rel="stylesheet" th:href="@{https://cdn.datatables.net/1.13.5/css/dataTables.bootstrap5.min.css}"
    integrity="sha256-4W/j2Pv3N5VfbVDhzI8SKzHFHBfaOdZ2CZ1lXfxNofU=" crossorigin="anonymous"
    referrerpolicy="no-referrer">
  <title>VideoID B-Universe</title>
</head>
<header>
  <nav class="navbar navbar-expand-lg"
    th:style="'background-image:url('+@{/images/images2.png}+');background-size:cover;'">
    <a class="navbar-brand"><img class="img-fluid" th:src="@{/images/BTV.svg}" alt=""
        style="width: 80px; margin:auto 20px" /></a>
  </nav>
</header>

<body>
  <div class="container">
    <div class="row">
      <div class="col-2">
        <select type="text" id="format" class="form-control">
          <option value="" selected disabled>--FORMAT--</option>
          <option value="TV">Iklan/TVC/Filler</option>
          <option value="PB">Promo Program</option>
          <option value="TR">Iklan Rokok</option>
          <option value="RT">Runing text</option>
          <option value="SI">Super Inpose</option>
          <option value="LT">Lower Thirtd</option>
          <option value="VP">Virus Promo</option>
          <option value="SF">Squise Frame</option>
          <option value="ST">Station ID</option>

        </select>
      </div>
      <div class="col-8">
        <input type="text" id="judul" class="form-control" required="true" placeholder="Judul" />
        <small class="form-text text-muted">Ex. NIVEAMAN CUCIMUKA 15SEC (namaprogram versi/judul
          durasi/episode)</small>

      </div>
      <div class="col-2">
        <a type="button" class="btn btn-success btn-sm" style="width: 100%; color: white;" id="generated"><i
            class="fa-solid fa-arrows-rotate"></i>`</a>
      </div>
    </div>
    <div class="row">
      <h1 class="text-center mt-3" id="hasilnya"></h1>
      <button class="btncopy btn-primary" data-clipboard-target="#hasilnya">
        Copy
      </button>
    </div>

    <div class="table-responsive">
      <table class="table table-bordered" id="tableLog" width="100%" cellspacing="0">
        <thead>
          <tr>
            <th>Video ID</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
  </div>

</body>


</html>


<!---------------------------------------------------------------------------------------->

<script th:src="@{https://code.jquery.com/jquery-3.7.0.js}"
  integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"
  referrerpolicy="no-referrer"></script>
<script th:src="@{https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js}"
  integrity="sha256-WgfGn5Bh6xLjmgMTWKT1Z/MKACrWGCY5rIT9G9ovbmU=" crossorigin="anonymous"
  referrerpolicy="no-referrer"></script>
<script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js}"
  integrity="sha256-XDbijJp72GS2c+Ij234ZNJIyJ1Nv+9+HH1i28JuayMk=" crossorigin="anonymous"
  referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.18/dist/sweetalert2.all.min.js"
  integrity="sha256-eYINpiFTsm812/hOBxFCGaSZzPvHBZZFYSe5ZWLgYzo=" crossorigin="anonymous"></script>
<script type="text/javascript" th:src="@{https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.0/axios.min.js}"
  integrity="sha256-xJNTehIpC6/bk41FMzIkPAjeo8cYvnGnxbv/YgAM1og=" crossorigin="anonymous"
  referrerpolicy="no-referrer"></script>
<script type="text/javascript" th:src="@{https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js}"
  integrity="sha256-SiAZnUXHs7kYBGG6qPk6OD4EOKySGou87ww6tcmGwcM=" crossorigin="anonymous"
  referrerpolicy="no-referrer"></script>
<script th:src="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js}"
  integrity="sha384-Y7LSKwoY+C2iyfu/oupNnkGEN3EgA6skmJeVg5AyQk7ttcjX0XsLREmmuJW/SdbU" crossorigin="anonymous"></script>
<script type="text/javascript" th:src="@{https://cdn.datatables.net/1.13.5/js/dataTables.bootstrap5.min.js}"
  integrity="sha256-u2kP0BrkAUxorzBPuW9nh3TKCtaXXSD3VY6/gxvUJig=" crossorigin="anonymous"
  referrerpolicy="no-referrer"></script>
<script type="text/javascript"  th:src="@{https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js}"
  integrity="sha384-J08i8An/QeARD9ExYpvphB8BsyOj3Gh2TSh1aLINKO3L0cMSH2dN3E22zFoXEi0Q" crossorigin="anonymous"></script>
<script th:inline="javascript">
  /*<![CDATA[*/
  $(document).ready(function () {
    today = mm + '/' + dd + '/' + yyyy;
    showtableVideoID();
    new ClipboardJS('.btncopy');
  })
  var today = new Date();
  var dd = String(today.getDate()).padStart(2, '0');
  var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
  var yyyy = String(today.getFullYear());
  var yy = yyyy.substring(2, 4);

  $("#generated").on("click", function () {

    var format = $("#format option:selected").val();
    var hasil1 = format + yy;
    console.log(hasil1);

    var program = $("#judul").val().split(' ');
    var hasil2 = program[0] + "_" + program[1] + "_" + program[2];
    console.log(hasil2);

    $.ajax({
      method: 'post',
      url: `/In?hasil1=${hasil1}&hasil2=${hasil2}&tahun=${yyyy}`,
      success: function (data, status, jqXHR) {
        console.log(`${data.hasil}`);
        document.getElementById('hasilnya').innerHTML = `${data.hasil}`;
      },
      done: function() {
        tableVideoID.ajax.reload();
      }
    })
    
  })

  var tableVideoID;
  function showtableVideoID() {
    tablepersonall = $("#tableLog").DataTable({
      dom: "<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'f>>\n        <'table-responsive'tr>\n        <'row align-items-center'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7 d-flex justify-content-end'p>>",
      language: {
        zeroRecords: "Data Tidak Ada",
        paginate: {
          previous: '<i class="fa fa-lg fa-angle-left"></i>',
          next: '<i class="fa fa-lg fa-angle-right"></i>',
        },
      },
      searching: false,
      stateSave: false,
      serverSide: true,
      processing: true,
      ordering: false,
      "bDestroy": true,
      lengthMenu: [5, 10],
      ajax: function (data, callback, settings) {
        var page = Math.ceil(
          settings._iDisplayStart / settings._iDisplayLength
        );
        var url = `/findvideo?start=${page}&length=${data.length}`;
        $.get(url, function (response) {
          var out = [];
          response.data.content.forEach(function (logC, i) {
            out.push([
              logC.hasil,
            ]);
          });
          callback({
            recordsTotal: response.data.totalElements,
            recordsFiltered: response.data.totalElements,
            data: out,
          });
        });
      },
      deferRender: true,
    });
  }

  /*]]>*/
</script>